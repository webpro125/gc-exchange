- content_for :header do
  = render 'layouts/registration_header'
- content_for :css do
  :css
    #am_form .form-validation {
      text-align: left
    }
.page-content
  %section
    %section.entity-company.taxonomy-view
      %header.ui-box.taxonomy-head{"data-section" => "toggle-head", "data-toggle-container" => ""}
        .entity-head{"data-ignore-global-close" => "1", "data-target" => "toggle-head", "data-type" => "cm-toggle"}
          %h1= @owned_company.company_name
          .ui-panel-toggle.icon-cr-plus-full
        .entity-info.grid.columns-3.ui-panel{"data-section" => "toggle-head", "data-slide-open" => ""}
          .grid-4-12
            %h3 Company Address
            %p= @owned_company.address
          .grid-4-12
            %h3 Company Contract POC
            %p.name= @owned_company.owner.full_name.split.map(&:capitalize).join(' ')
            %p.email= @owned_company.owner.email
            %p= @owned_company.work_phone
          .grid-4-12
            %h3 Company Documents
            %ul.doc-list
              %li
                = link_to_if(@owned_company.gsc.present?, @owned_company.gsc_file_name, download_gsc_path(@owned_company), target: '_blank') {}
              %li
                = link_to_if(@owned_company.contract.present?, @owned_company.contract_file_name, download_contract_rider_path(@owned_company), target: '_blank') {}
      %section.taxonomy-units
        %section.row.first-set.connect-rule-up
          %header.section-intro
            %h1.section-title Invite Account Manager
            %p.section-description Add brief description here lorem ipsum sit amet quosque tandem set numa consect. Ipsum sit amet quosque tandem set numa consect, lorem ipsum sit amet quosque tandem set numa consect..
            %figure.figure-account-manager
              = image_tag "infographics_business_person_manager.png"
          = simple_form_for(@form, html: {class: 'theme-gces style-alternate', id: 'am_form'}) do |f|
            = render 'shared/base_error', model: @form
            = f.input :email, required: false, placeholder: 'Email', wrapper: :custom_input, label: false,
              :url => autocomplete_user_email_account_managers_path, :as => :autocomplete,
              input_wrapper_html: { class: 'icon-email' }
            .grid.columns-2.margin-top-1r{:role => "grid" }
              .grid-6-12{:role => "gridcell" }
                = f.input :first_name, required: false, placeholder: 'First Name', label: false,
                  wrapper: :custom_input, input_wrapper_html: { class: 'icon-profile' }
              .grid-6-12{:role => "gridcell" }
                = f.input :last_name, required: false, placeholder: 'Last Name', label: false,
                wrapper: :custom_input, input_wrapper_html: { class: 'icon-profile' }
            .button-link.icon-email-full.air-top
              Preview Email
            .preview-email-input.hide
              = f.input :email_content,label: false, wrapper: :custom_no_wrapper_input, as: :text,
                input_html: { value: AccountManager::DEFAULT_EMAIL_CONTENT, rows: 3 }
            = button_tag 'Send Invite to Account Manager', type: 'submit', class: "button-cta button-primary icon-cr-arrow-right am-button"
        %section.row.hidden
- content_for :footer do
  %footer#main-footer{:role => "contentinfo"}
    %p.site-credits &copy; 2015 Playground

- content_for :js do
  :javascript
    (function () {
        $(function () {
            var eventEmitter = $(document);

            eventEmitter.on('cm.toggle.close', function (event, data) {
                $('.entity-taxonomy').removeClass('is-open');
            });

            eventEmitter.on('cm.toggle.open', function (event, data) {
                if (data['toggle-head'] === undefined) {
                    $('.entity-taxonomy').addClass('is-open');
                }
            });
        });
    })();
