<% body_class('report-public-page') %>

<h3 class="text-center">Public Web Page Metrics Captured from Traffic External of Portal</h3>

<div class="report">
  <% if GA_API_CLIENT.present? %>
    <div class="small-12 report-toolbar clearfix">
      <div class="right filter-types">
        <button data-dropdown="drop-filter-types" data-options="align:left" class="button tiny dropdown" id="filter-types-btn">last 1 month</button><br>
        <ul id="drop-filter-types" data-dropdown-content class="f-dropdown" aria-hidden="true">
          <li><a href="#" data-filter="today">today</a></li>
          <li><a href="#" data-filter="last-week">last week</a></li>
          <li><a href="#" data-filter="last-month">last 1 month</a></li>
          <li><a href="#" data-filter="last-2-months">last 2 months</a></li>
          <li><a href="#" data-filter="last-3-months">last 3 months</a></li>
        </ul>
      </div>

      <h4 id="date-range"></h4>
    </div>

    <hr>

    <div class="report-data">
      <h3 id="alert-message" class="text-center">
        <span class="warning label">Please check google analytics configuration</span>
      </h3>
      <div id="detail-session-graph" style="height: 200px; display: none;"></div>
      <ul class="small-block-grid-3" data-equalizer>
        <li>
          <div class="panel text-center expandable" data-type="pageviews" data-equalizer-watch>
            <h2 id="total-pageviews">0</h2>
            <p>Total Pageviews</p>
          </div>
        </li>
        <li>
          <div class="panel text-center expandable" data-type="avg_session_duration" data-equalizer-watch>
            <h2 id="avg-session-duration">0</h2>
            <p>Avg. Session Duration</p>
          </div>
        </li>
        <li>
          <div class="panel text-center expandable" data-type="pages_per_session" data-equalizer-watch>
            <h2 id="page-per-session">0</h2>
            <p>Pages per Session</p>
          </div>
        </li>
        <li>
          <div class="panel text-center" data-equalizer-watch>
            <div id="sessions-per-device" class="dimension-pie-chart"></div>
            <p>Sessions per Device</p>
          </div>
        </li>
        <li>
          <div class="panel text-center" data-equalizer-watch>
            <div id="sessions-in-bound" class="dimension-pie-chart"></div>
            <p>Source of In-Bound</p>
          </div>
        </li>
        <li>
          <div class="panel text-center" data-equalizer-watch>
            <div id="sessions-per-browser" class="dimension-pie-chart"></div>
            <p>Sessions per Browser</p>
          </div>
        </li>
        <li>
          <div class="panel text-center">
            <div id="sessions-per-country">
            </div>
          </div>
        </li>
        <li>
          <div class="panel text-center">
            <div id="sessions-per-city">
            </div>
          </div>
        </li>
      </ul>

      <div id="loading" class="loading-indicator">
        <span class="spinner"></span>
      </div>
    </div>
  <% else %>
    <h2>Please set-up google analytics to get visits metrics.</h2>
  <% end %>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>